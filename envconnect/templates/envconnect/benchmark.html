{% extends "envconnect/base.html" %}
{% load static from staticfiles %}

{% block icons_menu %}
    {% include "envconnect/_benchmark_menu.html" with icon_row_title="Scorecard" arc_title="Total Score" arc_chart_id="score-card" %}
{% endblock icons_menu %}

{% block app_content %}
<div id="benchmarks" class="benchmarks-box" style="margin-top: 25px;">
    <h2 style="margin-left: 5px;">Benchmark graphs</h2>
    <div>
        <div class="row row-flex">
            {% for chart in charts %}
            {% if forloop.counter0|divisibleby:3 %}
        </div>
        <div class="row row-flex">
            {% endif %}
            <div class="col-md-4">
                <div id="{{chart.slug}}-chart" class="chart-container">
                    {% include "envconnect/_chart_title.html" with practice=chart %}
                    <div>
                        <div class="chart-content c3" style="width:250px;height:120px;">
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<div id="not-applicable-questions" class="benchmarks-box" style="margin-top: 25px; margin-bottom: 25px;">
    <h2 style="margin-left: 5px;">"Not Applicable" Answers</h2>
    {% if not_applicables %}
    <h5 style="margin-left: 5px;">The scorecarded organization responded that the following issues are not applicable to them</h5>
    <ol>
        {% for not_applicable in not_applicables %}
        <li><a href="{% url 'summary_organization' organization not_applicable.0 %}">{{ not_applicable.1.title }}</a></li>
        {% endfor %}
    </ol>
    {% else %}
    <h5 style="margin-left: 5px;">No questions have been marked as "Not Applicable".</h5>
    {% endif %}
</div>
{% endblock app_content%}

{% block bodyscripts %}
{{block.super}}
<script type="text/javascript">
    jQuery(document).ready(function($) {
        $("#panel-icons").improvementDashboard({
            api_account_benchmark: "{{api_account_benchmark}}",
            benchmark: "{{root.0.slug}}",
            scoreFunc: function (elem) { return elem.normalized_score; }
        });
        $("#history-chart").historicalScoreChart({});

        // Copy/Paste from vendor/js/bootstrap.js and inserted
        // a forced trigger of 'resize' for NVD3 to redraw the chart
        // using correct dimensions.
        $(document).on('shown.bs.tab',
                   '[data-toggle="tab"], [data-toggle="pill"]', function () {
            window.dispatchEvent(new Event('resize'));
         });
    });
</script>
{% if request|is_broker_manager %}
{% assets "css_editor" %}
    <link rel="stylesheet" media="screen" href="{{ ASSET_URL }}" />
{% endassets %}
{% assets "js_editor" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
{% endassets %}
{% endif %}
{% endblock %}
